var i=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var g=(r,e)=>{for(var t in e)i(r,t,{get:e[t],enumerable:!0})},p=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of m(e))!u.call(r,o)&&o!==t&&i(r,o,{get:()=>e[o],enumerable:!(s=c(e,o))||s.enumerable});return r};var f=r=>p(i({},"__esModule",{value:!0}),r);var h={};g(h,{authorizationHandler:()=>w});module.exports=f(h);var n=require("@aws-sdk/client-cognito-identity-provider");var a=require("crypto");function d(r,e,t){let s=t+r;return(0,a.createHmac)("sha256",e).update(s).digest("base64")}var l=new n.CognitoIdentityProviderClient({region:"us-east-1"}),w=async r=>{try{let e=JSON.parse(r.body),t={AuthFlow:"USER_PASSWORD_AUTH",ClientId:process.env.COGNITO_ID,AuthParameters:{USERNAME:e.username,PASSWORD:e.password,SECRET_HASH:d(process.env.COGNITO_ID,process.env.COGNITO_SECRET,e.username)}},s=new n.InitiateAuthCommand(t),o=await l.send(s);return{statusCode:200,body:JSON.stringify(o)}}catch(e){let t={message:`Error: ${e.message}`};return{statusCode:500,body:JSON.stringify(t)}}};0&&(module.exports={authorizationHandler});
//# sourceMappingURL=index.js.map
