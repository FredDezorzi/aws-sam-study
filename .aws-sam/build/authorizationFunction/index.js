var a=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var d=(s,e)=>{for(var n in e)a(s,n,{get:e[n],enumerable:!0})},l=(s,e,n,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of m(e))!u.call(s,r)&&r!==n&&a(s,r,{get:()=>e[r],enumerable:!(t=i(e,r))||t.enumerable});return s};var O=s=>l(a({},"__esModule",{value:!0}),s);var g={};d(g,{authorizationHandler:()=>p});module.exports=O(g);var c=require("crypto"),o=require("@aws-sdk/client-cognito-identity-provider"),S=new o.CognitoIdentityProviderClient({region:"us-east-1"}),p=async s=>{let e=JSON.parse(s.body);console.log("CREDENTIALS:",JSON.stringify(e,null,2));let n={AuthFlow:"USER_PASSWORD_AUTH",ClientId:process.env.COGNITO_ID,AuthParameters:{USERNAME:e.username,PASSWORD:e.password,SECRET_HASH:C(process.env.COGNITO_ID,process.env.COGNITO_SECRET,e.username)}};console.log("params para secret  hash: client_ID: "+process.env.COGNITO_ID+" secretId: "+process.env.COGNITO_SECRET+" username: "+e.username),console.log("params:",JSON.stringify(n,null,2));try{let t=new o.InitiateAuthCommand(n),r=await S.send(t);return{statusCode:200,body:JSON.stringify(r)}}catch(t){return{statusCode:500,body:JSON.stringify({message:t.message})}}};function C(s,e,n){let t=n+s;return(0,c.createHmac)("sha256",e).update(t).digest("base64")}0&&(module.exports={authorizationHandler});
//# sourceMappingURL=index.js.map
